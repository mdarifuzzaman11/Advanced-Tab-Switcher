let tabSwitcherInterval,isSwitching=!1,switchInterval=45e3;function updateBadge(){let text=isSwitching?"On":"Off",color=isSwitching?"#00FF00":"#FF0000";chrome.action.setBadgeText({text:text}),chrome.action.setBadgeBackgroundColor({color:color})}function switchTabs(){chrome.tabs.query({currentWindow:!0},(function(tabs){if(tabs.length<=1)return;let nextTabIndex=(tabs.findIndex((tab=>tab.active))+1)%tabs.length;chrome.tabs.update(tabs[nextTabIndex].id,{active:!0})}))}function startSwitching(){isSwitching||(isSwitching=!0,updateBadge(),switchTabs(),tabSwitcherInterval=setInterval(switchTabs,switchInterval))}function stopSwitching(){isSwitching&&(clearInterval(tabSwitcherInterval),isSwitching=!1,updateBadge())}chrome.storage.sync.get(["switchInterval"],(function(result){switchInterval=result.switchInterval||switchInterval})),chrome.runtime.onMessage.addListener((function(request,sender,sendResponse){"toggleSwitching"===request.action?(isSwitching?stopSwitching():(request.value&&(switchInterval=parseInt(request.value),chrome.storage.sync.set({switchInterval:switchInterval})),startSwitching()),sendResponse({isSwitching:isSwitching})):"queryState"===request.action&&sendResponse({isSwitching:isSwitching})})),chrome.commands.onCommand.addListener((function(command){"toggle-switch"===command&&(isSwitching?stopSwitching():startSwitching())})),updateBadge();